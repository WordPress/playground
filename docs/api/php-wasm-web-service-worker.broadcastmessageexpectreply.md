<!-- Do not edit this file. It is automatically generated by API Documenter. -->

## broadcastMessageExpectReply() function

broadcastMessageExpectReply<!-- -->(<!-- -->message<!-- -->: [any](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#any)<!-- -->, scope<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)<!-- -->)<!-- -->: [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)<!-- -->&lt;[number](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)<!-- -->&gt;

-   `message` – The message to broadcast.
-   `scope` – Target worker thread scope.
-   Returns: The request ID to receive the reply.

Sends the message to all the controlled clients
of this service worker.

This used to be implemented with a BroadcastChannel, but
it didn't work in Safari. BroadcastChannel breaks iframe
embedding the playground in Safari.

Weirdly, Safari does not pass any messages from the ServiceWorker
to Window if the page is rendered inside an iframe. Window to Service
Worker communication works just fine.

The regular client.postMessage() communication works perfectly, so that's
what this function uses to broadcast the message.
