<!-- Do not edit this file. It is automatically generated by API Documenter. -->

## PHP class
<b>Signature:</b>

```typescript
class PHP 
```
## Remarks
The constructor for this class is marked as internal. Third-party code should not call the constructor directly or create subclasses that extend the `PHP` class.

An environment-agnostic wrapper around the Emscripten PHP runtime
that abstracts the super low-level API and provides a more convenient
higher-level API.

It exposes a minimal set of methods to run PHP scripts and to
interact with the PHP filesystem.

## Methods

### destroyUploadedFilesHash<!-- -->(<!-- -->)<!-- -->: [void](https://www.typescriptlang.org/docs/handbook/2/functions.html#void)



Destroys the internal hash table to free the memory.
### fileExists<!-- -->(<!-- -->path<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)<!-- -->)<!-- -->: [boolean](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)

* `path` – The file path to check.
* Returns: True if the file exists, false otherwise.


Checks if a file (or a directory) exists in the PHP filesystem.
### initUploadedFilesHash<!-- -->(<!-- -->)<!-- -->: [void](https://www.typescriptlang.org/docs/handbook/2/functions.html#void)



Allocates an internal HashTable to keep track of the legitimate uploads.
Supporting file uploads via WebAssembly is a bit tricky.
Functions like `is_uploaded_file` or `move_uploaded_file` fail to work
with those $_FILES entries that are not in an internal hash table. This
is a security feature, see this exceprt from the `is_uploaded_file` documentation:

> is_uploaded_file
>
> Returns true if the file named by filename was uploaded via HTTP POST. This is
> useful to help ensure that a malicious user hasn't tried to trick the script into
> working on files upon which it should not be working--for instance, /etc/passwd.
>
> This sort of check is especially important if there is any chance that anything
> done with uploaded files could reveal their contents to the user, or even to other
> users on the same system.
>
> For proper working, the function is_uploaded_file() needs an argument like
> $_FILES['userfile']['tmp_name'], - the name of the uploaded file on the client's
> machine $_FILES['userfile']['name'] does not work.

This PHP.wasm implementation doesn't run any PHP request machinery, so PHP never has
a chance to note which files were actually uploaded. In practice, `is_uploaded_file()`
always returns false.

`initUploadedFilesHash()`<!-- -->, `registerUploadedFile()`<!-- -->, and `destroyUploadedFilesHash()`
are a workaround for this problem. They allow you to manually register uploaded
files in the internal hash table, so that PHP functions like `move_uploaded_file()`
can recognize them.

Usage:

```js
// Create an uploaded file in the PHP filesystem.
php.writeFile(
   '/tmp/test.txt',
   'I am an uploaded file!'
);

// Allocate the internal hash table.
php.initUploadedFilesHash();

// Register the uploaded file.
php.registerUploadedFile('/tmp/test.txt');

// Run PHP code that uses the uploaded file.
php.run(`<?php
 _FILES[key] = {
     name: value.name,
     type: value.type,
     tmp_name: tmpPath,
     error: 0,
     size: value.size,
 };
 var_dump(is_uploaded_file($_FILES["file1"]["tmp_name"]));
 // true
`);

// Destroy the internal hash table to free the memory.
php.destroyUploadedFilesHash();
```


### mkdirTree<!-- -->(<!-- -->path<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)<!-- -->)<!-- -->: [void](https://www.typescriptlang.org/docs/handbook/2/functions.html#void)

* `path` – The directory path to create.


Recursively creates a directory with the given path in the PHP filesystem.
For example, if the path is `/root/php/data`<!-- -->, and `/root` already exists,
it will create the directories `/root/php` and `/root/php/data`<!-- -->.


### readFileAsBuffer<!-- -->(<!-- -->path<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)<!-- -->)<!-- -->: [Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)

* `path` – The file path to read.
* Returns: The file contents.

Exceptions:


Reads a file from the PHP filesystem and returns it as an array buffer.
### readFileAsText<!-- -->(<!-- -->path<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)<!-- -->)<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)

* `path` – The file path to read.
* Returns: The file contents.

Exceptions:


Reads a file from the PHP filesystem and returns it as a string.
### registerUploadedFile<!-- -->(<!-- -->tmpPath<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)<!-- -->)<!-- -->: [void](https://www.typescriptlang.org/docs/handbook/2/functions.html#void)

* `tmpPath` – The temporary path of the uploaded file.


Registers an uploaded file in the internal hash table.
### run<!-- -->(<!-- -->code<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)<!-- -->)<!-- -->: [PHPOutput](./php-wasm.phpoutput.md)

* `code` – The PHP code to run.
* Returns: The PHP process output.


Runs a PHP script and outputs an object with three properties:
stdout, stderr, and the exitCode.

* `exitCode` – the exit code of the script. `0` is a success, while `1` and `2` indicate an error.
* `stdout` – containing the output from `echo`<!-- -->, `print`<!-- -->, inline HTML etc.
* `stderr` – containing all the errors are logged. It can also be written
to explicitly:

```js
console.log(php.run(`<?php
 $fp = fopen('php://stderr', 'w');
 fwrite($fp, "Hello, world!");
`));
// {"exitCode":0,"stdout":"","stderr":["Hello, world!"]}
```


### unlink<!-- -->(<!-- -->path<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)<!-- -->)<!-- -->: [void](https://www.typescriptlang.org/docs/handbook/2/functions.html#void)

* `path` – The file path to remove.

Exceptions:


Removes a file from the PHP filesystem.
### writeFile<!-- -->(<!-- -->path<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)<!-- -->, data<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)<!-- -->|[Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)<!-- -->)<!-- -->: [any](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#any)

* `path` – The file path to write to.
* `data` – The data to write to the file.


Overwrites data in a file in the PHP filesystem.
Creates a new file if one doesn't exist yet.



