<!-- Do not edit this file. It is automatically generated by API Documenter. -->

## PHPServer class

<b>Signature:</b>

```typescript
class PHPServer
```

A fake PHP server that handles HTTP requests but does not
bind to any port.

## Constructors

### PHPServer<!-- -->(<!-- -->php<!-- -->: [PHP](./php-wasm-node.php.md)<!-- -->, config?<!-- -->: [PHPServerConfigation](./php-wasm-node.phpserverconfigation.md)<!-- -->)

-   `php` – The PHP instance.
-   `config` – Optional. Server configuration.

Constructs a new instance of the `PHPServer` class

## Properties

-   `absoluteUrl` readonly [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean) – The absolute URL of this PHPServer instance.
-   `documentRoot` readonly [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean) – The absolute URL of this PHPServer instance.
-   `php` [PHP](./php-wasm-node.php.md) – The PHP instance

## Methods

### internalUrlToPath<!-- -->(<!-- -->internalUrl<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)<!-- -->)<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)

-   `internalUrl` – An absolute URL based at the PHPServer root.
-   Returns: The relative path.

Converts an absolute URL based at the PHPServer to a relative path
without the server pathname and scope.

### pathToInternalUrl<!-- -->(<!-- -->path<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)<!-- -->)<!-- -->: [string](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean)

-   `path` – The server path to convert to an absolute URL.
-   Returns: The absolute URL.

Converts a path to an absolute URL based at the PHPServer
root.

### request<!-- -->(<!-- -->request<!-- -->: [PHPServerRequest](./php-wasm-node.phpserverrequest.md)<!-- -->)<!-- -->: [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)<!-- -->&lt;[PHPResponse](./php-wasm-node.phpresponse.md)<!-- -->&gt;

-   `request` – The request.
-   Returns: The response.

Serves the request – either by serving a static file, or by
dispatching it to the PHP runtime.

## Example

```js
import {
	loadPHPRuntime,
	PHP,
	PHPServer,
	PHPBrowser,
	getPHPLoaderModule,
} from '@wp-playground/php-wasm-web';

const runtime = await loadPHPRuntime(await getPHPLoaderModule('7.4'));
const php = new PHP(runtime);

php.mkdirTree('/www');
php.writeFile('/www/index.php', '<?php echo "Hi from PHP!"; ');

const server = new PHPServer(php, {
	// PHP FS path to serve the files from:
	documentRoot: '/www',

	// Used to populate $_SERVER['SERVER_NAME'] etc.:
	absoluteUrl: 'http://127.0.0.1',
});

const output = server.request({ path: '/index.php' }).body;
console.log(new TextDecoder().decode(output));
// "Hi from PHP!"
```
